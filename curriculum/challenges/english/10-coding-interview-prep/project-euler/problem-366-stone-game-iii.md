---
id: 5900f4da1000cf542c50ffed
title: 'Problem 366: Stone Game III'
challengeType: 5
forumTopicId: 302027
dashedName: problem-366-stone-game-iii
---

# --description--

ผู้เล่นสองคนคือ Anton และ Bernhard กำลังเล่นเกมต่อไปนี้

มีก้อนหิน $n$ หนึ่งกอง

ผู้เล่นคนแรกสามารถเอาหินจำนวนบวกออกได้ แต่ไม่ใช่ทั้งกอง

หลังจากนั้น ผู้เล่นแต่ละคนสามารถถอดหินออกได้มากเป็นสองเท่าของจำนวนหินที่คู่ต่อสู้ของเขาทำในครั้งก่อน

ผู้เล่นที่เอาหินก้อนสุดท้ายออกจะเป็นผู้ชนะ

เช่น. $n = 5$

หากผู้เล่นคนแรกรับหินมากกว่าหนึ่งก้อน ผู้เล่นคนต่อไปจะสามารถรับหินที่เหลือทั้งหมดได้

ถ้าผู้เล่นคนแรกหยิบหินได้หนึ่งก้อน เหลือสี่ก้อน ฝ่ายตรงข้ามก็จะหยิบหินไปหนึ่งก้อนด้วย เหลือหินสามก้อน

ผู้เล่นคนแรกไม่สามารถรับทั้งสามได้ เพราะเขาอาจรับได้มากสุด $2 \ ครั้ง 1 = 2$ ก้อนหิน สมมุติว่าเขาเอาหินไปหนึ่งก้อน เหลือ 2 ก้อน

ผู้เล่นคนที่สองสามารถรับหินสองก้อนที่เหลือและชนะได้

ดังนั้น 5 จึงเป็นตำแหน่งที่แพ้สำหรับผู้เล่นคนแรก

สำหรับตำแหน่งที่ชนะบางตำแหน่ง มีการย้ายที่เป็นไปได้มากกว่าหนึ่งครั้งสำหรับผู้เล่นคนแรก

เช่น. เมื่อ $n = 17$ ผู้เล่นคนแรกสามารถถอดหินได้หนึ่งหรือสี่ก้อน

ให้ $M(n)$ เป็นจำนวนหินสูงสุดที่ผู้เล่นคนแรกสามารถรับได้จากตำแหน่งที่ชนะในเทิร์นแรกของเขา และ $M(n) = 0$ สำหรับตำแหน่งอื่น

$\sum M(n)$ สำหรับ $n ≤ 100$ คือ 728

หา $\sum M(n)$ สำหรับ $n ≤ {10}^{18}$ ให้คำตอบแบบmodulo ${10}^8$

# --hints--

`stoneGameThree()` ควร return `88351299`.

```js
assert.strictEqual(stoneGameThree(), 88351299);
```

# --seed--

## --seed-contents--

```js
function stoneGameThree() {

  return true;
}

stoneGameThree();
```

# --solutions--

```js
// solution required
```
